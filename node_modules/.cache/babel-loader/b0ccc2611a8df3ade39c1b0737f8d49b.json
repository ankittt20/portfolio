{"ast":null,"code":"import sync from 'framesync';\nimport { copyAxisBox } from '../../../utils/geometry/index.js';\nimport { compareByDepth } from '../../utils/compare-by-depth.js';\n\nfunction updateTreeLayoutMeasurements(visualElement, isRelativeDrag) {\n  withoutTreeTransform(visualElement, function () {\n    var allChildren = collectProjectingChildren(visualElement);\n    batchResetAndMeasure(allChildren);\n    updateLayoutMeasurement(visualElement);\n  });\n  !isRelativeDrag && visualElement.rebaseProjectionTarget(true, visualElement.measureViewportBox(false));\n}\n\nfunction collectProjectingChildren(visualElement) {\n  var children = [];\n\n  var addChild = function addChild(child) {\n    child.isProjecting() && children.push(child);\n    child.children.forEach(addChild);\n  };\n\n  visualElement.children.forEach(addChild);\n  return children.sort(compareByDepth);\n}\n/**\n * Perform the callback after temporarily unapplying the transform\n * upwards through the tree.\n */\n\n\nfunction withoutTreeTransform(visualElement, callback) {\n  var parent = visualElement.parent;\n  var isEnabled = visualElement.projection.isEnabled;\n  isEnabled && visualElement.resetTransform();\n  parent ? withoutTreeTransform(parent, callback) : callback();\n  isEnabled && visualElement.restoreTransform();\n}\n/**\n * Update the layoutState by measuring the DOM layout. This\n * should be called after resetting any layout-affecting transforms.\n */\n\n\nfunction updateLayoutMeasurement(visualElement) {\n  var layoutState = visualElement.getLayoutState();\n  visualElement.notifyBeforeLayoutMeasure(layoutState.layout);\n  layoutState.isHydrated = true;\n  layoutState.layout = visualElement.measureViewportBox();\n  layoutState.layoutCorrected = copyAxisBox(layoutState.layout);\n  visualElement.notifyLayoutMeasure(layoutState.layout, visualElement.prevViewportBox || layoutState.layout);\n  sync.update(function () {\n    return visualElement.rebaseProjectionTarget();\n  });\n}\n/**\n * Record the viewport box as it was before an expected mutation/re-render\n */\n\n\nfunction snapshotViewportBox(visualElement) {\n  visualElement.prevViewportBox = visualElement.measureViewportBox(false);\n  /**\n   * Update targetBox to match the prevViewportBox. This is just to ensure\n   * that targetBox is affected by scroll in the same way as the measured box\n   */\n\n  visualElement.rebaseProjectionTarget(false, visualElement.prevViewportBox);\n}\n\nfunction batchResetAndMeasure(order) {\n  /**\n   * Write: Reset any transforms on children elements so we can read their actual layout\n   */\n  order.forEach(function (child) {\n    return child.resetTransform();\n  });\n  /**\n   * Read: Measure the actual layout\n   */\n\n  order.forEach(updateLayoutMeasurement);\n}\n\nexport { batchResetAndMeasure, collectProjectingChildren, snapshotViewportBox, updateLayoutMeasurement, updateTreeLayoutMeasurements, withoutTreeTransform };","map":{"version":3,"names":["sync","copyAxisBox","compareByDepth","updateTreeLayoutMeasurements","visualElement","isRelativeDrag","withoutTreeTransform","allChildren","collectProjectingChildren","batchResetAndMeasure","updateLayoutMeasurement","rebaseProjectionTarget","measureViewportBox","children","addChild","child","isProjecting","push","forEach","sort","callback","parent","isEnabled","projection","resetTransform","restoreTransform","layoutState","getLayoutState","notifyBeforeLayoutMeasure","layout","isHydrated","layoutCorrected","notifyLayoutMeasure","prevViewportBox","update","snapshotViewportBox","order"],"sources":["D:/Coding/Web Development/portfolio/node_modules/framer-motion/dist/es/render/dom/projection/utils.js"],"sourcesContent":["import sync from 'framesync';\nimport { copyAxisBox } from '../../../utils/geometry/index.js';\nimport { compareByDepth } from '../../utils/compare-by-depth.js';\n\nfunction updateTreeLayoutMeasurements(visualElement, isRelativeDrag) {\n    withoutTreeTransform(visualElement, function () {\n        var allChildren = collectProjectingChildren(visualElement);\n        batchResetAndMeasure(allChildren);\n        updateLayoutMeasurement(visualElement);\n    });\n    !isRelativeDrag &&\n        visualElement.rebaseProjectionTarget(true, visualElement.measureViewportBox(false));\n}\nfunction collectProjectingChildren(visualElement) {\n    var children = [];\n    var addChild = function (child) {\n        child.isProjecting() && children.push(child);\n        child.children.forEach(addChild);\n    };\n    visualElement.children.forEach(addChild);\n    return children.sort(compareByDepth);\n}\n/**\n * Perform the callback after temporarily unapplying the transform\n * upwards through the tree.\n */\nfunction withoutTreeTransform(visualElement, callback) {\n    var parent = visualElement.parent;\n    var isEnabled = visualElement.projection.isEnabled;\n    isEnabled && visualElement.resetTransform();\n    parent ? withoutTreeTransform(parent, callback) : callback();\n    isEnabled && visualElement.restoreTransform();\n}\n/**\n * Update the layoutState by measuring the DOM layout. This\n * should be called after resetting any layout-affecting transforms.\n */\nfunction updateLayoutMeasurement(visualElement) {\n    var layoutState = visualElement.getLayoutState();\n    visualElement.notifyBeforeLayoutMeasure(layoutState.layout);\n    layoutState.isHydrated = true;\n    layoutState.layout = visualElement.measureViewportBox();\n    layoutState.layoutCorrected = copyAxisBox(layoutState.layout);\n    visualElement.notifyLayoutMeasure(layoutState.layout, visualElement.prevViewportBox || layoutState.layout);\n    sync.update(function () { return visualElement.rebaseProjectionTarget(); });\n}\n/**\n * Record the viewport box as it was before an expected mutation/re-render\n */\nfunction snapshotViewportBox(visualElement) {\n    visualElement.prevViewportBox = visualElement.measureViewportBox(false);\n    /**\n     * Update targetBox to match the prevViewportBox. This is just to ensure\n     * that targetBox is affected by scroll in the same way as the measured box\n     */\n    visualElement.rebaseProjectionTarget(false, visualElement.prevViewportBox);\n}\nfunction batchResetAndMeasure(order) {\n    /**\n     * Write: Reset any transforms on children elements so we can read their actual layout\n     */\n    order.forEach(function (child) { return child.resetTransform(); });\n    /**\n     * Read: Measure the actual layout\n     */\n    order.forEach(updateLayoutMeasurement);\n}\n\nexport { batchResetAndMeasure, collectProjectingChildren, snapshotViewportBox, updateLayoutMeasurement, updateTreeLayoutMeasurements, withoutTreeTransform };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}